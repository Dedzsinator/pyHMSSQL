var app=function(){"use strict";function e(){}function t(e){return e()}function s(){return Object.create(null)}function n(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function i(e,t,s){e.insertBefore(t,s||null)}function r(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function u(){return d(" ")}function v(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}function h(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function f(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t,s,n){null==s?e.style.removeProperty(t):e.style.setProperty(t,s,n?"important":"")}function p(e,t,s){e.classList.toggle(t,!!s)}let g;function w(e){g=e}function $(e){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(e)}const y=[],b=[];let x=[];const k=[],C=Promise.resolve();let _=!1;function j(e){x.push(e)}const q=new Set;let S=0;function A(){if(0!==S)return;const e=g;do{try{for(;S<y.length;){const e=y[S];S++,w(e),N(e.$$)}}catch(e){throw y.length=0,S=0,e}for(w(null),y.length=0,S=0;b.length;)b.pop()();for(let e=0;e<x.length;e+=1){const t=x[e];q.has(t)||(q.add(t),t())}x.length=0}while(y.length);for(;k.length;)k.pop()();_=!1,q.clear(),w(e)}function N(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}const M=new Set;function z(e,t){e&&e.i&&(M.delete(e),e.i(t))}function D(e,t,s,n){if(e&&e.o){if(M.has(e))return;M.add(e),undefined.c.push(()=>{M.delete(e),n&&(s&&e.d(1),n())}),e.o(t)}else n&&n()}function F(e){return void 0!==e?.length?e:Array.from(e)}function E(e,t){e.d(1),t.delete(e.key)}function O(e){e&&e.c()}function L(e,s,o){const{fragment:a,after_update:i}=e.$$;a&&a.m(s,o),j(()=>{const s=e.$$.on_mount.map(t).filter(l);e.$$.on_destroy?e.$$.on_destroy.push(...s):n(s),e.$$.on_mount=[]}),i.forEach(j)}function T(e,t){const s=e.$$;null!==s.fragment&&(!function(e){const t=[],s=[];x.forEach(n=>-1===e.indexOf(n)?t.push(n):s.push(n)),s.forEach(e=>e()),x=t}(s.after_update),n(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function H(e,t){-1===e.$$.dirty[0]&&(y.push(e),_||(_=!0,C.then(A)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(t,l,o,a,i,c,d=null,u=[-1]){const v=g;w(t);const h=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:i,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(v?v.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:l.target||v.$$.root};d&&d(h.root);let f=!1;if(h.ctx=o?o(t,l.props||{},(e,s,...n)=>{const l=n.length?n[0]:s;return h.ctx&&i(h.ctx[e],h.ctx[e]=l)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](l),f&&H(t,e)),s}):[],h.update(),f=!0,n(h.before_update),h.fragment=!!a&&a(h.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);h.fragment&&h.fragment.l(e),e.forEach(r)}else h.fragment&&h.fragment.c();l.intro&&z(t.$$.fragment),L(t,l.target,l.anchor),A()}w(v)}class R{$$=void 0;$$set=void 0;$destroy(){T(this,1),this.$destroy=e}$on(t,s){if(!l(s))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(s),()=>{const e=n.indexOf(s);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function I(t){let s,n,l,o,v,p,g,w,$,y,b,x,k,C,_,j,q,S,A,N,M,z,D,F,E,O,L,T,H,P,R,I,U,B,Q,J,Y,G,K,V,W=t[3].toFixed(1)+"",X=t[2].toUpperCase()+"";return{c(){s=c("div"),n=c("h2"),n.textContent="üìä Cluster Overview",l=u(),o=c("div"),v=c("div"),p=c("div"),p.textContent="üñ•Ô∏è",g=u(),w=c("div"),$=c("h3"),$.textContent="Total Nodes",y=u(),b=c("div"),x=d(t[0]),k=u(),C=c("div"),_=d(t[4]),j=d(" healthy"),q=u(),S=c("div"),A=c("div"),A.textContent="‚ù§Ô∏è",N=u(),M=c("div"),z=c("h3"),z.textContent="Cluster Health",D=u(),F=c("div"),E=d(W),O=d("%"),L=u(),T=c("div"),H=d(X),P=u(),R=c("div"),I=c("div"),I.textContent="üåê",U=u(),B=c("div"),Q=c("h3"),Q.textContent="Topology",J=u(),Y=c("div"),G=d(t[1]),K=u(),V=c("div"),V.textContent="consensus mode",h(n,"class","svelte-9fqp2s"),h(p,"class","metric-icon svelte-9fqp2s"),h($,"class","svelte-9fqp2s"),h(b,"class","metric-value svelte-9fqp2s"),h(C,"class","metric-subtext svelte-9fqp2s"),h(w,"class","metric-content svelte-9fqp2s"),h(v,"class","metric-card svelte-9fqp2s"),h(A,"class","metric-icon svelte-9fqp2s"),h(z,"class","svelte-9fqp2s"),h(F,"class","metric-value svelte-9fqp2s"),m(F,"color",t[5](t[2])),h(T,"class","metric-subtext svelte-9fqp2s"),h(M,"class","metric-content svelte-9fqp2s"),h(S,"class","metric-card svelte-9fqp2s"),h(I,"class","metric-icon svelte-9fqp2s"),h(Q,"class","svelte-9fqp2s"),h(Y,"class","metric-value svelte-9fqp2s"),h(V,"class","metric-subtext svelte-9fqp2s"),h(B,"class","metric-content svelte-9fqp2s"),h(R,"class","metric-card svelte-9fqp2s"),h(o,"class","overview-grid svelte-9fqp2s"),h(s,"class","cluster-overview svelte-9fqp2s")},m(e,t){i(e,s,t),a(s,n),a(s,l),a(s,o),a(o,v),a(v,p),a(v,g),a(v,w),a(w,$),a(w,y),a(w,b),a(b,x),a(w,k),a(w,C),a(C,_),a(C,j),a(o,q),a(o,S),a(S,A),a(S,N),a(S,M),a(M,z),a(M,D),a(M,F),a(F,E),a(F,O),a(M,L),a(M,T),a(T,H),a(o,P),a(o,R),a(R,I),a(R,U),a(R,B),a(B,Q),a(B,J),a(B,Y),a(Y,G),a(B,K),a(B,V)},p(e,[t]){1&t&&f(x,e[0]),16&t&&f(_,e[4]),8&t&&W!==(W=e[3].toFixed(1)+"")&&f(E,W),4&t&&m(F,"color",e[5](e[2])),4&t&&X!==(X=e[2].toUpperCase()+"")&&f(H,X),2&t&&f(G,e[1])},i:e,o:e,d(e){e&&r(s)}}}function U(e,t,s){let n,l,o,a,i,{clusterData:r}=t,{totalNodes:c}=t;return e.$$set=e=>{"clusterData"in e&&s(6,r=e.clusterData),"totalNodes"in e&&s(0,c=e.totalNodes)},e.$$.update=()=>{64&e.$$.dirty&&s(7,n=r.health_summary||{}),128&e.$$.dirty&&s(4,l=n.healthy_nodes||0),128&e.$$.dirty&&s(3,o=n.health_percentage||0),128&e.$$.dirty&&s(2,a=n.status||"unknown"),64&e.$$.dirty&&s(1,i=r.topology||"unknown")},[c,i,a,o,l,function(e){switch(e){case"healthy":return"#28a745";case"degraded":return"#ffc107";case"critical":return"#dc3545";default:return"#6c757d"}},r,n]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class B extends R{constructor(e){super(),P(this,e,U,I,o,{clusterData:6,totalNodes:0})}}function Q(e,t,s){const n=e.slice();return n[5]=t[s],n}function J(e){let t,s=[],l=new Map,o=F(e[1]);const a=e=>e[5].node_id;for(let t=0;t<o.length;t+=1){let n=Q(e,o,t),i=a(n);l.set(i,s[t]=X(i,n))}return{c(){t=c("div");for(let e=0;e<s.length;e+=1)s[e].c();h(t,"class","nodes-container svelte-18shsje")},m(e,n){i(e,t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null)},p(e,i){3&i&&(o=F(e[1]),s=function(e,t,s,l,o,a,i,r,c,d,u,v){let h=e.length,f=a.length,m=h;const p={};for(;m--;)p[e[m].key]=m;const g=[],w=new Map,$=new Map,y=[];for(m=f;m--;){const e=v(o,a,m),n=s(e);let r=i.get(n);r?l&&y.push(()=>r.p(e,t)):(r=d(n,e),r.c()),w.set(n,g[m]=r),n in p&&$.set(n,Math.abs(m-p[n]))}const b=new Set,x=new Set;function k(e){z(e,1),e.m(r,u),i.set(e.key,e),u=e.first,f--}for(;h&&f;){const t=g[f-1],s=e[h-1],n=t.key,l=s.key;t===s?(u=t.first,h--,f--):w.has(l)?!i.has(n)||b.has(n)?k(t):x.has(l)?h--:$.get(n)>$.get(l)?(x.add(n),k(t)):(b.add(l),h--):(c(s,i),h--)}for(;h--;){const t=e[h];w.has(t.key)||c(t,i)}for(;f;)k(g[f-1]);return n(y),g}(s,i,a,1,e,o,l,t,E,X,null,Q))},d(e){e&&r(t);for(let e=0;e<s.length;e+=1)s[e].d()}}}function Y(t){let s;return{c(){s=c("div"),s.innerHTML='<div class="no-nodes-icon svelte-18shsje">üîç</div> <p>No nodes discovered yet</p>',h(s,"class","no-nodes svelte-18shsje")},m(e,t){i(e,s,t)},p:e,d(e){e&&r(s)}}}function G(e){let t,s,n,l,o,v,m,p,g,w,$,y,b,x=(e[5].stats.performance.cpu_usage?.toFixed(1)||0)+"",k=(e[5].stats.performance.memory_usage?.toFixed(1)||0)+"";return{c(){t=c("div"),s=c("span"),s.textContent="CPU:",n=u(),l=c("span"),o=d(x),v=d("%"),m=u(),p=c("div"),g=c("span"),g.textContent="Memory:",w=u(),$=c("span"),y=d(k),b=d("%"),h(s,"class","detail-label svelte-18shsje"),h(l,"class","detail-value svelte-18shsje"),h(t,"class","detail-row svelte-18shsje"),h(g,"class","detail-label svelte-18shsje"),h($,"class","detail-value svelte-18shsje"),h(p,"class","detail-row svelte-18shsje")},m(e,r){i(e,t,r),a(t,s),a(t,n),a(t,l),a(l,o),a(l,v),i(e,m,r),i(e,p,r),a(p,g),a(p,w),a(p,$),a($,y),a($,b)},p(e,t){2&t&&x!==(x=(e[5].stats.performance.cpu_usage?.toFixed(1)||0)+"")&&f(o,x),2&t&&k!==(k=(e[5].stats.performance.memory_usage?.toFixed(1)||0)+"")&&f(y,k)},d(e){e&&(r(t),r(m),r(p))}}}function K(t){let s;return{c(){s=c("div"),s.textContent="Not Available",h(s,"class","unavailable-badge svelte-18shsje")},m(e,t){i(e,s,t)},p:e,d(e){e&&r(s)}}}function V(t){let s;return{c(){s=c("div"),s.textContent="PRIMARY",h(s,"class","primary-badge svelte-18shsje")},m(e,t){i(e,s,t)},p:e,d(e){e&&r(s)}}}function W(e){let t,s,n;function l(){return e[4](e[5])}return{c(){t=c("button"),t.textContent="Promote to Primary",h(t,"class","promote-btn svelte-18shsje")},m(e,o){i(e,t,o),s||(n=v(t,"click",l),s=!0)},p(t,s){e=t},d(e){e&&r(t),s=!1,n()}}}function X(e,t){let s,n,l,o,v,m,p,g,w,$,y,b,x,k,C,_,j,q,S,A,N,M,z,D,F,E,O,L,T,H,P,R,I,U,B,Q,J,Y,X,Z,ne,le,oe,ae,ie,re,ce,de,ue,ve,he,fe,me,pe=t[5].node_id+"",ge=(t[5].role||"unknown")+"",we=t[5].host+"",$e=t[5].port+"",ye=(t[5].health||"unknown")+"",be=se(t[5].uptime)+"",xe=(t[5].connections||0)+"",ke=(t[5].raft_state||"unknown")+"",Ce=(t[5].replication_lag||0)+"",_e=t[5].stats&&t[5].stats.performance&&G(t);function je(e,t){return"primary"!==e[5].role&&"healthy"===e[5].health?W:"primary"===e[5].role?V:K}let qe=je(t),Se=qe(t);return{key:e,first:null,c(){s=c("div"),n=c("div"),l=c("div"),o=d(pe),v=u(),m=c("div"),p=d(ge),w=u(),$=c("div"),y=c("div"),b=c("span"),b.textContent="Host:",x=u(),k=c("span"),C=d(we),_=d(":"),j=d($e),q=u(),S=c("div"),A=c("span"),A.textContent="Health:",N=u(),M=c("span"),z=d(ye),D=u(),F=c("div"),E=c("span"),E.textContent="Uptime:",O=u(),L=c("span"),T=d(be),H=u(),P=c("div"),R=c("span"),R.textContent="Connections:",I=u(),U=c("span"),B=d(xe),Q=u(),J=c("div"),Y=c("span"),Y.textContent="RAFT State:",X=u(),Z=c("span"),ne=d(ke),le=u(),oe=c("div"),ae=c("span"),ae.textContent="Repl. Lag:",ie=u(),re=c("span"),ce=d(Ce),de=d("ms"),ue=u(),_e&&_e.c(),ve=u(),he=c("div"),Se.c(),fe=u(),h(l,"class","node-id svelte-18shsje"),h(m,"class",g="node-role "+te(t[5].role)+" svelte-18shsje"),h(n,"class","node-header svelte-18shsje"),h(b,"class","detail-label svelte-18shsje"),h(k,"class","detail-value svelte-18shsje"),h(y,"class","detail-row svelte-18shsje"),h(A,"class","detail-label svelte-18shsje"),h(M,"class","detail-value svelte-18shsje"),h(S,"class","detail-row svelte-18shsje"),h(E,"class","detail-label svelte-18shsje"),h(L,"class","detail-value svelte-18shsje"),h(F,"class","detail-row svelte-18shsje"),h(R,"class","detail-label svelte-18shsje"),h(U,"class","detail-value svelte-18shsje"),h(P,"class","detail-row svelte-18shsje"),h(Y,"class","detail-label svelte-18shsje"),h(Z,"class","detail-value svelte-18shsje"),h(J,"class","detail-row svelte-18shsje"),h(ae,"class","detail-label svelte-18shsje"),h(re,"class","detail-value svelte-18shsje"),h(oe,"class","detail-row svelte-18shsje"),h($,"class","node-details svelte-18shsje"),h(he,"class","node-actions svelte-18shsje"),h(s,"class",me="node-card "+ee(t[5].health)+" svelte-18shsje"),this.first=s},m(e,t){i(e,s,t),a(s,n),a(n,l),a(l,o),a(n,v),a(n,m),a(m,p),a(s,w),a(s,$),a($,y),a(y,b),a(y,x),a(y,k),a(k,C),a(k,_),a(k,j),a($,q),a($,S),a(S,A),a(S,N),a(S,M),a(M,z),a($,D),a($,F),a(F,E),a(F,O),a(F,L),a(L,T),a($,H),a($,P),a(P,R),a(P,I),a(P,U),a(U,B),a($,Q),a($,J),a(J,Y),a(J,X),a(J,Z),a(Z,ne),a($,le),a($,oe),a(oe,ae),a(oe,ie),a(oe,re),a(re,ce),a(re,de),a($,ue),_e&&_e.m($,null),a(s,ve),a(s,he),Se.m(he,null),a(s,fe)},p(e,n){t=e,2&n&&pe!==(pe=t[5].node_id+"")&&f(o,pe),2&n&&ge!==(ge=(t[5].role||"unknown")+"")&&f(p,ge),2&n&&g!==(g="node-role "+te(t[5].role)+" svelte-18shsje")&&h(m,"class",g),2&n&&we!==(we=t[5].host+"")&&f(C,we),2&n&&$e!==($e=t[5].port+"")&&f(j,$e),2&n&&ye!==(ye=(t[5].health||"unknown")+"")&&f(z,ye),2&n&&be!==(be=se(t[5].uptime)+"")&&f(T,be),2&n&&xe!==(xe=(t[5].connections||0)+"")&&f(B,xe),2&n&&ke!==(ke=(t[5].raft_state||"unknown")+"")&&f(ne,ke),2&n&&Ce!==(Ce=(t[5].replication_lag||0)+"")&&f(ce,Ce),t[5].stats&&t[5].stats.performance?_e?_e.p(t,n):(_e=G(t),_e.c(),_e.m($,null)):_e&&(_e.d(1),_e=null),qe===(qe=je(t))&&Se?Se.p(t,n):(Se.d(1),Se=qe(t),Se&&(Se.c(),Se.m(he,null))),2&n&&me!==(me="node-card "+ee(t[5].health)+" svelte-18shsje")&&h(s,"class",me)},d(e){e&&r(s),_e&&_e.d(),Se.d()}}}function Z(t){let s,n,l;function o(e,t){return 0===e[1].length?Y:J}let d=o(t),v=d(t);return{c(){s=c("div"),n=c("h2"),n.textContent="üñ•Ô∏è Database Nodes",l=u(),v.c(),h(n,"class","svelte-18shsje"),h(s,"class","node-grid svelte-18shsje")},m(e,t){i(e,s,t),a(s,n),a(s,l),v.m(s,null)},p(e,[t]){d===(d=o(e))&&v?v.p(e,t):(v.d(1),v=d(e),v&&(v.c(),v.m(s,null)))},i:e,o:e,d(e){e&&r(s),v.d()}}}function ee(e){switch(e){case"healthy":return"node-healthy";case"degraded":return"node-degraded";case"failed":return"node-failed";default:return"node-unknown"}}function te(e){switch(e){case"primary":return"role-primary";case"replica":return"role-replica";case"leader":return"role-leader";default:return"role-unknown"}}function se(e){return e?`${(e/3600).toFixed(1)}h`:"0h"}function ne(e,t,s){let n,{nodes:l}=t,{serverStats:o}=t,{onFailover:a}=t;return e.$$set=e=>{"nodes"in e&&s(2,l=e.nodes),"serverStats"in e&&s(3,o=e.serverStats),"onFailover"in e&&s(0,a=e.onFailover)},e.$$.update=()=>{12&e.$$.dirty&&s(1,n=Object.entries(l||{}).map(([e,t])=>({...t,stats:o[e]||{}})))},[a,n,l,o,e=>a(e.node_id)]}class le extends R{constructor(e){super(),P(this,e,ne,Z,o,{nodes:2,serverStats:3,onFailover:0})}}function oe(t){let s,n,l,o,v,m,p,g,w,$,y,b,x,k,C,_,j,q,S,A,N,M,z,D,F,E,O,L,T,H,P,R,I,U,B,Q,J,Y,G,K,V,W=t[1].toFixed(1)+"",X=ae(t[4])+"";return{c(){s=c("div"),n=c("h2"),n.textContent="üìà System Metrics",l=u(),o=c("div"),v=c("div"),m=c("div"),m.textContent="Discovery Runs",p=u(),g=c("div"),w=d(t[6]),$=u(),y=c("div"),b=c("div"),b.textContent="Failovers",x=u(),k=c("div"),C=d(t[5]),_=u(),j=c("div"),q=c("div"),q.textContent="Healthy Nodes",S=u(),A=c("div"),N=d(t[3]),M=u(),z=c("div"),D=c("div"),D.textContent="Failed Nodes",F=u(),E=c("div"),O=d(t[2]),L=u(),T=c("div"),H=c("div"),H.textContent="Health",P=u(),R=c("div"),I=d(W),U=d("%"),Q=u(),J=c("div"),Y=c("div"),Y.textContent="Last Discovery",G=u(),K=c("div"),V=d(X),h(n,"class","svelte-1itwzw8"),h(m,"class","metric-label svelte-1itwzw8"),h(g,"class","metric-value svelte-1itwzw8"),h(v,"class","metric-item svelte-1itwzw8"),h(b,"class","metric-label svelte-1itwzw8"),h(k,"class","metric-value failover-count svelte-1itwzw8"),h(y,"class","metric-item svelte-1itwzw8"),h(q,"class","metric-label svelte-1itwzw8"),h(A,"class","metric-value healthy-count svelte-1itwzw8"),h(j,"class","metric-item svelte-1itwzw8"),h(D,"class","metric-label svelte-1itwzw8"),h(E,"class","metric-value failed-count svelte-1itwzw8"),h(z,"class","metric-item svelte-1itwzw8"),h(H,"class","metric-label svelte-1itwzw8"),h(R,"class","metric-value health-percentage svelte-1itwzw8"),h(R,"data-health",B=t[0].status),h(T,"class","metric-item svelte-1itwzw8"),h(Y,"class","metric-label svelte-1itwzw8"),h(K,"class","metric-value time-value svelte-1itwzw8"),h(J,"class","metric-item full-width svelte-1itwzw8"),h(o,"class","metrics-grid svelte-1itwzw8"),h(s,"class","metrics-panel svelte-1itwzw8")},m(e,t){i(e,s,t),a(s,n),a(s,l),a(s,o),a(o,v),a(v,m),a(v,p),a(v,g),a(g,w),a(o,$),a(o,y),a(y,b),a(y,x),a(y,k),a(k,C),a(o,_),a(o,j),a(j,q),a(j,S),a(j,A),a(A,N),a(o,M),a(o,z),a(z,D),a(z,F),a(z,E),a(E,O),a(o,L),a(o,T),a(T,H),a(T,P),a(T,R),a(R,I),a(R,U),a(o,Q),a(o,J),a(J,Y),a(J,G),a(J,K),a(K,V)},p(e,[t]){64&t&&f(w,e[6]),32&t&&f(C,e[5]),8&t&&f(N,e[3]),4&t&&f(O,e[2]),2&t&&W!==(W=e[1].toFixed(1)+"")&&f(I,W),1&t&&B!==(B=e[0].status)&&h(R,"data-health",B),16&t&&X!==(X=ae(e[4])+"")&&f(V,X)},i:e,o:e,d(e){e&&r(s)}}}function ae(e){return e?new Date(e).toLocaleTimeString():"Never"}function ie(e,t,s){let n,l,o,a,i,r,{metrics:c}=t,{healthSummary:d}=t;return e.$$set=e=>{"metrics"in e&&s(7,c=e.metrics),"healthSummary"in e&&s(0,d=e.healthSummary)},e.$$.update=()=>{128&e.$$.dirty&&s(6,n=c.discovery_runs||0),128&e.$$.dirty&&s(5,l=c.failovers_executed||0),128&e.$$.dirty&&s(4,o=c.last_discovery),128&e.$$.dirty&&c.total_nodes_discovered,128&e.$$.dirty&&s(3,a=c.healthy_nodes||0),128&e.$$.dirty&&s(2,i=c.failed_nodes||0),1&e.$$.dirty&&s(1,r=d.health_percentage||0)},[d,r,i,a,o,l,n,c]}class re extends R{constructor(e){super(),P(this,e,ie,oe,o,{metrics:7,healthSummary:0})}}function ce(t){let s,n,l,o,d,v;return{c(){s=c("div"),n=c("h2"),n.textContent="üåê Cluster Topology",l=u(),o=c("div"),o.innerHTML='<div class="legend svelte-bis7ll"><div class="legend-item svelte-bis7ll"><div class="legend-color primary svelte-bis7ll"></div> <span>Primary Master</span></div> <div class="legend-item svelte-bis7ll"><div class="legend-color semi svelte-bis7ll"></div> <span>Semi Master</span></div> <div class="legend-item svelte-bis7ll"><div class="legend-color replica svelte-bis7ll"></div> <span>Replica</span></div> <div class="legend-item svelte-bis7ll"><div class="legend-color offline svelte-bis7ll"></div> <span>Offline</span></div></div>',d=u(),v=c("div"),v.innerHTML="",h(n,"class","svelte-bis7ll"),h(o,"class","topology-controls svelte-bis7ll"),h(v,"class","topology-container svelte-bis7ll"),h(s,"class","topology-graph svelte-bis7ll")},m(e,r){i(e,s,r),a(s,n),a(s,l),a(s,o),a(s,d),a(s,v),t[3](v)},p:e,i:e,o:e,d(e){e&&r(s),t[3](null)}}}function de(e,t,s){let n,{data:l}=t,{onNodeClick:o=()=>{}}=t;function a(){if(!n||!l||!l.nodes)return;s(0,n.innerHTML="",n);const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width","100%"),e.setAttribute("height","400"),e.setAttribute("viewBox","0 0 800 400");const t=l.nodes||[];if(0===t.length){const t=document.createElementNS("http://www.w3.org/2000/svg","text");return t.setAttribute("x","400"),t.setAttribute("y","200"),t.setAttribute("text-anchor","middle"),t.setAttribute("fill","#666"),t.setAttribute("font-size","16"),t.textContent="No topology data available",e.appendChild(t),void n.appendChild(e)}const a=120;t.forEach((s,n)=>{const l=n/t.length*2*Math.PI,i=400+Math.cos(l)*a,r=200+Math.sin(l)*a,c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("cx",i),c.setAttribute("cy",r),c.setAttribute("r","30");let d="#6c757d";"primary_master"===s.role?d="#dc3545":"semi_master"===s.role?d="#fd7e14":"replica"===s.role&&(d="#28a745"),c.setAttribute("fill",d),c.setAttribute("stroke","#333"),c.setAttribute("stroke-width","2"),c.style.cursor="pointer",c.addEventListener("click",()=>o(s.id)),e.appendChild(c);const u=document.createElementNS("http://www.w3.org/2000/svg","text");u.setAttribute("x",i),u.setAttribute("y",r+5),u.setAttribute("text-anchor","middle"),u.setAttribute("fill","white"),u.setAttribute("font-size","12"),u.setAttribute("font-weight","bold"),u.textContent=s.id?s.id.split("-")[1]||s.id.slice(-4):"N/A",u.style.pointerEvents="none",e.appendChild(u);const v=document.createElementNS("http://www.w3.org/2000/svg","text");v.setAttribute("x",i),v.setAttribute("y",r+45),v.setAttribute("text-anchor","middle"),v.setAttribute("fill","#333"),v.setAttribute("font-size","10"),v.textContent=s.health||"unknown",e.appendChild(v)});(l.edges||[]).forEach(s=>{const n=t.find(e=>e.id===s.from),l=t.find(e=>e.id===s.to);if(n&&l){const s=t.indexOf(n),o=t.indexOf(l),i=s/t.length*2*Math.PI,r=o/t.length*2*Math.PI,c=400+Math.cos(i)*a,d=200+Math.sin(i)*a,u=400+Math.cos(r)*a,v=200+Math.sin(r)*a,h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("x1",c),h.setAttribute("y1",d),h.setAttribute("x2",u),h.setAttribute("y2",v),h.setAttribute("stroke","#666"),h.setAttribute("stroke-width","2"),h.setAttribute("opacity","0.6"),e.insertBefore(h,e.firstChild)}}),n.appendChild(e)}return $(()=>{a()}),e.$$set=e=>{"data"in e&&s(1,l=e.data),"onNodeClick"in e&&s(2,o=e.onNodeClick)},e.$$.update=()=>{3&e.$$.dirty&&l&&l.nodes&&n&&a()},[n,l,o,function(e){b[e?"unshift":"push"](()=>{n=e,s(0,n)})}]}class ue extends R{constructor(e){super(),P(this,e,de,ce,o,{data:1,onNodeClick:2})}}function ve(e,t,s){const n=e.slice();return n[4]=t[s],n}function he(e){let t,s=F(e[0]),n=[];for(let t=0;t<s.length;t+=1)n[t]=me(ve(e,s,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=d("")},m(e,s){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,s);i(e,t,s)},p(e,l){if(1&l){let o;for(s=F(e[0]),o=0;o<s.length;o+=1){const a=ve(e,s,o);n[o]?n[o].p(a,l):(n[o]=me(a),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},d(e){e&&r(t),function(e,t){for(let s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}(n,e)}}}function fe(t){let s;return{c(){s=c("div"),s.innerHTML='<div class="no-logs-icon svelte-dqvk3h">üìù</div> <p>No recent events</p>',h(s,"class","no-logs svelte-dqvk3h")},m(e,t){i(e,s,t)},p:e,d(e){e&&r(s)}}}function me(e){let t,s,n,l,o,v,m,p,g,w,$,y=ge(e[4].timestamp)+"",b=e[4].level.toUpperCase()+"",x=e[4].message+"";return{c(){t=c("div"),s=c("div"),n=d(y),l=u(),o=c("div"),v=d(b),m=u(),p=c("div"),g=d(x),w=u(),h(s,"class","log-time svelte-dqvk3h"),h(o,"class","log-level svelte-dqvk3h"),h(p,"class","log-message svelte-dqvk3h"),h(t,"class",$="log-entry "+we(e[4].level)+" svelte-dqvk3h")},m(e,r){i(e,t,r),a(t,s),a(s,n),a(t,l),a(t,o),a(o,v),a(t,m),a(t,p),a(p,g),a(t,w)},p(e,s){1&s&&y!==(y=ge(e[4].timestamp)+"")&&f(n,y),1&s&&b!==(b=e[4].level.toUpperCase()+"")&&f(v,b),1&s&&x!==(x=e[4].message+"")&&f(g,x),1&s&&$!==($="log-entry "+we(e[4].level)+" svelte-dqvk3h")&&h(t,"class",$)},d(e){e&&r(t)}}}function pe(t){let s,n,l,o,m,g,w,$,y,b,x,k=t[1]?"üîÑ":"‚Üª";function C(e,t){return 0===e[0].length?fe:he}let _=C(t),j=_(t);return{c(){s=c("div"),n=c("div"),l=c("h2"),l.textContent="üìã Recent Events",o=u(),m=c("button"),g=d(k),w=d(" Refresh"),$=u(),y=c("div"),j.c(),h(l,"class","svelte-dqvk3h"),h(m,"class","refresh-logs-btn svelte-dqvk3h"),m.disabled=t[1],p(m,"loading",t[1]),h(n,"class","log-header svelte-dqvk3h"),h(y,"class","log-container svelte-dqvk3h"),h(s,"class","log-viewer svelte-dqvk3h")},m(e,r){i(e,s,r),a(s,n),a(n,l),a(n,o),a(n,m),a(m,g),a(m,w),a(s,$),a(s,y),j.m(y,null),b||(x=v(m,"click",t[2]),b=!0)},p(e,[t]){2&t&&k!==(k=e[1]?"üîÑ":"‚Üª")&&f(g,k),2&t&&(m.disabled=e[1]),2&t&&p(m,"loading",e[1]),_===(_=C(e))&&j?j.p(e,t):(j.d(1),j=_(e),j&&(j.c(),j.m(y,null)))},i:e,o:e,d(e){e&&r(s),j.d(),b=!1,x()}}}function ge(e){return new Date(e).toLocaleTimeString()}function we(e){switch(e){case"error":return"log-error";case"warning":return"log-warning";case"info":return"log-info";default:return"log-default"}}function $e(e,t,s){let n=[],l=!1;function o(){const e=[{level:"info",message:"Discovery loop started",timestamp:(new Date).toISOString()},{level:"info",message:"Found 3 nodes in cluster",timestamp:new Date(Date.now()-3e4).toISOString()},{level:"warning",message:"Node localhost-9998 marked as degraded",timestamp:new Date(Date.now()-6e4).toISOString()},{level:"info",message:"Health monitoring loop active",timestamp:new Date(Date.now()-9e4).toISOString()},{level:"info",message:"HMSSQL Database Orchestrator started",timestamp:new Date(Date.now()-12e4).toISOString()}];s(0,n=e)}return $(()=>{o()}),[n,l,function(){s(1,l=!0),setTimeout(()=>{o(),s(1,l=!1)},500)}]}class ye extends R{constructor(e){super(),P(this,e,$e,pe,o,{})}}function be(e){let t,s,n,l=e[4].toLocaleTimeString()+"";return{c(){t=c("span"),s=d("Last updated: "),n=d(l),h(t,"class","last-refresh svelte-ngqgno")},m(e,l){i(e,t,l),a(t,s),a(t,n)},p(e,t){16&t&&l!==(l=e[4].toLocaleTimeString()+"")&&f(n,l)},d(e){e&&r(t)}}}function xe(e){let t,s,n,l,o,m,g,w,$,y,b,x,k,C,_,j,q,S,A,N,M,F,E,H,P,R,I,U,Q,J,Y=e[3]?"üîÑ Refreshing...":"üîÑ Refresh",G=e[4]&&be(e);return _=new B({props:{clusterData:e[0],totalNodes:Object.keys(e[0].nodes||{}).length}}),S=new re({props:{metrics:e[0].metrics||{},healthSummary:e[0].health_summary||{}}}),M=new ue({props:{data:e[2],onNodeClick:e[7]}}),H=new le({props:{nodes:e[0].nodes||{},serverStats:e[1],onFailover:e[6]}}),I=new ye({}),{c(){t=c("main"),s=c("header"),n=c("div"),l=c("h1"),l.textContent="üéØ HMSSQL Database Orchestrator",o=u(),m=c("p"),m.textContent="Real-time cluster monitoring and management",g=u(),w=c("div"),$=c("button"),y=d(Y),b=u(),G&&G.c(),x=u(),k=c("div"),C=c("section"),O(_.$$.fragment),j=u(),q=c("section"),O(S.$$.fragment),A=u(),N=c("section"),O(M.$$.fragment),F=u(),E=c("section"),O(H.$$.fragment),P=u(),R=c("section"),O(I.$$.fragment),h(l,"class","svelte-ngqgno"),h(m,"class","svelte-ngqgno"),h($,"class","refresh-btn svelte-ngqgno"),$.disabled=e[3],p($,"refreshing",e[3]),h(w,"class","header-actions svelte-ngqgno"),h(n,"class","header-content svelte-ngqgno"),h(s,"class","app-header svelte-ngqgno"),h(C,"class","overview-section svelte-ngqgno"),h(q,"class","metrics-section svelte-ngqgno"),h(N,"class","topology-section full-width svelte-ngqgno"),h(E,"class","nodes-section full-width svelte-ngqgno"),h(R,"class","logs-section full-width svelte-ngqgno"),h(k,"class","dashboard-container svelte-ngqgno"),h(t,"class","orchestrator-app svelte-ngqgno")},m(r,c){i(r,t,c),a(t,s),a(s,n),a(n,l),a(n,o),a(n,m),a(n,g),a(n,w),a(w,$),a($,y),a(w,b),G&&G.m(w,null),a(t,x),a(t,k),a(k,C),L(_,C,null),a(k,j),a(k,q),L(S,q,null),a(k,A),a(k,N),L(M,N,null),a(k,F),a(k,E),L(H,E,null),a(k,P),a(k,R),L(I,R,null),U=!0,Q||(J=v($,"click",e[5]),Q=!0)},p(e,[t]){(!U||8&t)&&Y!==(Y=e[3]?"üîÑ Refreshing...":"üîÑ Refresh")&&f(y,Y),(!U||8&t)&&($.disabled=e[3]),(!U||8&t)&&p($,"refreshing",e[3]),e[4]?G?G.p(e,t):(G=be(e),G.c(),G.m(w,null)):G&&(G.d(1),G=null);const s={};1&t&&(s.clusterData=e[0]),1&t&&(s.totalNodes=Object.keys(e[0].nodes||{}).length),_.$set(s);const n={};1&t&&(n.metrics=e[0].metrics||{}),1&t&&(n.healthSummary=e[0].health_summary||{}),S.$set(n);const l={};4&t&&(l.data=e[2]),M.$set(l);const o={};1&t&&(o.nodes=e[0].nodes||{}),2&t&&(o.serverStats=e[1]),H.$set(o)},i(e){U||(z(_.$$.fragment,e),z(S.$$.fragment,e),z(M.$$.fragment,e),z(H.$$.fragment,e),z(I.$$.fragment,e),U=!0)},o(e){D(_.$$.fragment,e),D(S.$$.fragment,e),D(M.$$.fragment,e),D(H.$$.fragment,e),D(I.$$.fragment,e),U=!1},d(e){e&&r(t),G&&G.d(),T(_),T(S),T(M),T(H),T(I),Q=!1,J()}}}function ke(e,t,s){let n={nodes:{},metrics:{},health_summary:{},topology:"unknown"},l={},o={nodes:[],edges:[]},a=!1,i=null;async function r(){if(!a){s(3,a=!0);try{const e=await fetch("/api/cluster/status");e.ok&&s(0,n=await e.json());const t=await fetch("/api/stats/servers");t.ok&&s(1,l=await t.json());const a=await fetch("/api/topology/graph");a.ok&&s(2,o=await a.json()),s(4,i=new Date)}catch(e){console.error("Failed to refresh data:",e)}finally{s(3,a=!1)}}}$(()=>{r();const e=setInterval(r,1e4);return()=>clearInterval(e)});return[n,l,o,a,i,r,async function(e){if(confirm(`Promote ${e} to primary?`))try{const t=await fetch("/api/cluster/failover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target_node:e})}),s=await t.json();s.success?(alert("Failover initiated successfully"),await r()):alert(`Failover failed: ${s.error}`)}catch(e){alert(`Failover request failed: ${e.message}`)}},e=>console.log("Clicked node:",e)]}return new class extends R{constructor(e){super(),P(this,e,ke,xe,o,{})}}({target:document.body,props:{name:"HMSSQL Orchestrator"}})}();
//# sourceMappingURL=bundle.js.map
